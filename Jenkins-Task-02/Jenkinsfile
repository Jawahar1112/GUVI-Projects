cat > Jenkinsfile << 'EOF'
pipeline {
  agent any

  stages {
    stage('Build') {
      steps {
        echo 'Running build.sh'
        sh 'chmod +x build.sh'
        sh './build.sh'
      }
    }

    stage('Archive Output') {
      steps {
        archiveArtifacts artifacts: 'output.txt'
      }
    }
  }

  post {
    success {
      emailext(
        to: 'you@example.com',
        subject: "Build #${BUILD_NUMBER} SUCCESS",
        body: "The build was successful. See output.txt for results.",
        attachLog: true
      )
    }
    failure {
      emailext(
        to: 'you@example.com',
        subject: "Build #${BUILD_NUMBER} FAILED",
        body: "The build failed. Please check the console output.",
        attachLog: true
      )
    }
  }
}
EOF
